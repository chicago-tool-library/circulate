<%= render "admin/items/profile" do %>
    <h1 class="h3 mt-2">New Ticket Update</h1>

    <%= form_with(model: @ticket_update_form, url: admin_item_ticket_ticket_updates_path(@item, @ticket, @ticket_update), builder: SpectreFormBuilder) do |form| %>
        <%= form.errors %>
        <%= form.rich_text_area :body %>
        <%= form.number_field :time_spent, hint: "How many minutes did you spend on this?" %>

        <div data-controller="conditional-field" data-conditional-field-trigger-value="<%= Ticket.statuses["retired"] %>">
            <%= form.select :status, options_for_select(ticket_status_options, @ticket_update_form.status), {label: "Change Ticket Status"}, data: {action: "conditional-field#change", "conditional-field-target": "parent"} %>
            <%= tag.div data: {"conditional-field-target": "child"}, class: "conditional-field-child" do %>
                <%= form.select :retired_reason, options_for_select(item_retired_reason_options), label: "Reason to retire" %>
            <% end %>
        </div>

        <%= form.actions do %>
            <%= form.submit "Save" %>
        <% end %>
    <% end %>
<% end %>
